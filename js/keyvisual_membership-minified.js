let font;function preload(){DegularDisplay=loadFont("fonts/DegularDisplay-Regular.otf"),DegularDisplaySemiB=loadFont("fonts/DegularDisplay-Semibold.otf")}const{Engine:t,World:e,Bodies:n,Composite:o,Mouse:s,MouseConstraint:r}=Matter;let circles=[],myboundary=[],gridWidth,gridHeight,segments=9,segmentSizeX,segmentSizeY,engine,world,canvasmouse,mConstraint,pointX=[],pointY=[];const point=[];function setup(){for((canvas=createCanvas(windowWidth,windowHeight)).parent("canvas-container"),canvas.style("display","block"),frameRate(60),world=(engine=t.create()).world,gridMarginTop=80,gridMarginBottom=20,segmentSizeX=(windowWidth-10-(gridMarginX=20))/segments,segmentSizeY=(windowHeight-gridMarginTop-gridMarginBottom)/segments,gridWidth=floor((width-gridMarginX)/segmentSizeX)+1,gridHeight=floor((height-gridMarginTop-gridMarginBottom)/segmentSizeX),pointX=JSON.parse(sessionStorage.getItem("pointX")),pointY=JSON.parse(sessionStorage.getItem("pointY")),null==pointX&&null==pointY&&(pointX=[null,...Array(8)],pointY=[null,...Array(8)],pointX[1]=floor(random(gridWidth/segments*3))*segmentSizeX+gridMarginX/2,pointY[1]=floor(random(gridWidth/segments*3))*segmentSizeY+gridMarginTop,pointX[2]=floor(random(gridWidth/segments*3,gridWidth/segments*6))*segmentSizeX+gridMarginX/2,pointY[2]=floor(random(gridWidth/segments*3))*segmentSizeY+gridMarginTop,pointX[3]=floor(random(gridWidth/segments*6,gridWidth))*segmentSizeX+gridMarginX/2,pointY[3]=floor(random(gridWidth/segments*3))*segmentSizeY+gridMarginTop,pointX[4]=floor(random(gridWidth/segments*6,gridWidth))*segmentSizeX,pointY[4]=floor(random(gridWidth/segments*3,gridWidth/segments*6))*segmentSizeY,pointX[5]=floor(random(gridWidth/segments*6,gridWidth))*segmentSizeX,pointY[5]=floor(random(gridWidth/segments*6,gridWidth))*segmentSizeY,pointX[6]=floor(random(gridWidth/segments*6,gridWidth))*segmentSizeX,pointY[6]=floor(random(gridWidth/segments*6,gridWidth))*segmentSizeY,pointX[7]=floor(random(gridWidth/segments*3))*segmentSizeX,pointY[7]=floor(random(gridWidth/segments*6,gridWidth))*segmentSizeY,pointX[8]=floor(random(gridWidth/segments*3))*segmentSizeX,pointY[8]=floor(random(gridWidth/segments*3,gridWidth/segments*6))*segmentSizeY,point[1]=createVector(pointX[1],pointY[1]),point[2]=createVector(pointX[2],pointY[2]),point[3]=createVector(pointX[3],pointY[3]),point[4]=createVector(pointX[4],pointY[4]),point[5]=createVector(pointX[5],pointY[5]),point[6]=createVector(pointX[6],pointY[6]),point[7]=createVector(pointX[7],pointY[7]),point[8]=createVector(pointX[8],pointY[8])),i=1;i<9;i++)point[i]={x:pointX[i],y:pointY[i]};for(i=1,myboundary[1]=new Boundary(point[1],point[2]),myboundary[2]=new Boundary(point[2],point[3]),myboundary[3]=new Boundary(point[3],point[4]),myboundary[4]=new Boundary(point[4],point[5]),myboundary[5]=new Boundary(point[5],point[6]),myboundary[6]=new Boundary(point[6],point[7]),myboundary[7]=new Boundary(point[7],point[8]),myboundary[8]=new Boundary(point[8],point[1]),point[9]=createVector(0,0),point[10]=createVector(width,0),point[11]=createVector(width,height),point[12]=createVector(0,height),myboundary[9]=new Boundary(point[9],point[10]),myboundary[10]=new Boundary(point[10],point[11]),myboundary[11]=new Boundary(point[11],point[12]),myboundary[12]=new Boundary(point[12],point[9]);i<12;i++)e.add(world,myboundary[i]);explosion();let n,o=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);if(!o){let p=s.create(canvas.elt);p.pixelRatio=pixelDensity(),(n=r.create(engine,{mouse:p})).mouse.element.removeEventListener("mousewheel",n.mouse.mousewheel),n.mouse.element.removeEventListener("DOMMouseScroll",n.mouse.mousewheel)}n&&e.add(world,[n])}function draw(){for(background(255),noStroke(),fill("#A4FFA3"),beginShape(),i=1;i<9;i++)vertex(pointX[i],pointY[i]);endShape(CLOSE);for(let e=0;e<circles.length;e++)circles[e].show();t.update(engine)}let smileySize=parseInt(getComputedStyle(document.documentElement).getPropertyValue("--smileySize"),10);function explosion(){let t={render:{sprite:{texture:"/Users/danielavogel/Documents/GitHubRepositories/DFC_Website_Keyvisual/img/FACE.png",xScale:1,yScale:1}}};for(let e=0;e<80;e++){let n=Math.random()*(pointX[3]-100-(pointX[1]+100))+pointX[1],o=Math.random()*(pointY[4]-pointY[1])+pointY[1];circles.push(new Circle(n,o,smileySize,t))}}class Boundary{constructor(t,n){this.point1=t,this.point2=n,this.body=this.createBody(),e.add(world,this.body)}createBody(){let t=this.point2.x-this.point1.x,e=this.point2.y-this.point1.y,o=(this.point1.x+this.point2.x)/2,s=(this.point1.y+this.point2.y)/2;return n.rectangle(o,s,Math.sqrt(t*t+e*e),15,{isStatic:!0,angle:Math.atan2(e,t)})}show(){line(this.point1.x,this.point1.y,this.point2.x,this.point2.y)}}class Circle{constructor(t,e,s){this.x=t,this.y=e,this.r=s,this.texture=createImg("./img/FACE.png"),this.texture.hide();let r={friction:0,restitution:.6};this.body=n.circle(this.x,this.y,this.r,r),o.add(world,this.body)}show(){let t=this.body.position,e=this.body.angle;push(),translate(t.x,t.y),rotate(e),imageMode(CENTER),image(this.texture,0,0,3*this.r,3*this.r),pop()}}